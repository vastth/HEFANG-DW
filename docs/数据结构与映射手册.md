# ä½•æ–¹ç å® - æ•°æ®ç»“æž„ä¸Žæ˜ å°„æ‰‹å†Œ

> Oracle/MySQLè¡¨ç»“æž„ | ç»´åº¦ç¼–ç æ˜ å°„ | å­—æ®µå¯¹ç…§

---

## ðŸ“‹ ç›®å½•

1. [Oracleæ ¸å¿ƒè¡¨ç»“æž„](#ä¸€oracleæ ¸å¿ƒè¡¨ç»“æž„)
2. [ç»´åº¦ç¼–ç ä¸ŽIDæ˜ å°„](#äºŒç»´åº¦ç¼–ç ä¸Židæ˜ å°„)
3. [MySQLæ•°ä»“å­—æ®µæ˜ å°„](#ä¸‰mysqlæ•°ä»“å­—æ®µæ˜ å°„)
4. [MySQLæ•°æ®å­—å…¸](#å››mysqlæ•°æ®å­—å…¸)

---

## ä¸€ã€Oracleæ ¸å¿ƒè¡¨ç»“æž„

### 1.1 æ ¸å¿ƒä¸šåŠ¡è¡¨æ¸…å•

| åºå· | è¡¨å | ä¸­æ–‡å | ç”¨é€” | é‡è¦ç¨‹åº¦ |
|------|------|--------|------|----------|
| 1 | M_PRODUCT | å•†å“ä¸»è¡¨ | å•†å“æ¬¾å·ä¿¡æ¯ | â­â­â­â­â­ |
| 2 | M_PRODUCT_ALIAS | æ¡ç è¡¨ | SKU/é¢œè‰²å°ºç  | â­â­â­â­â­ |
| 3 | M_DIM | ç»´åº¦è¡¨ | ç±»åˆ«/æ€§è´¨/ç³»åˆ—ç­‰å±žæ€§ | â­â­â­â­â­ |
| 4 | C_STORE | åº—ä»“æ¡£æ¡ˆ | é—¨åº—å’Œä»“åº“ä¿¡æ¯ | â­â­â­â­â­ |
| 5 | C_AREA | åŒºåŸŸè¡¨ | é”€å”®åŒºåŸŸ | â­â­â­ |
| 6 | FA_STORAGE | å®žæ—¶åº“å­˜ | å½“å‰åº“å­˜æ•°é‡ | â­â­â­â­â­ |
| 7 | FA_MONTHSTORE | æœˆè¿›é”€å­˜ | æœˆåº¦è¿›é”€å­˜æ±‡æ€» | â­â­â­â­ |
| 8 | M_RETAIL | é›¶å”®å• | çº¿ä¸‹+çº¿ä¸Šé›¶å”®ä¸»è¡¨ | â­â­â­â­â­ |
| 9 | M_RETAILITEM | é›¶å”®æ˜Žç»† | é›¶å”®å•å•†å“æ˜Žç»† | â­â­â­â­â­ |
| 10 | O2O_SO | ç”µå•†è®¢å• | çº¿ä¸Šè®¢å•ä¸»è¡¨ | â­â­â­â­ |
| 11 | O2O_SOITEM | ç”µå•†è®¢å•æ˜Žç»† | çº¿ä¸Šè®¢å•å•†å“æ˜Žç»† | â­â­â­â­ |
| 12 | O2O_RETAIL_CHANNEL | ç”µå•†æ¸ é“ | å¤©çŒ«/äº¬ä¸œ/æŠ–éŸ³ç­‰ | â­â­â­â­ |

---

### 1.2 M_PRODUCTï¼ˆå•†å“ä¸»è¡¨ï¼‰

```
è¡¨å: M_PRODUCT
æè¿°: å•†å“æ¡£æ¡ˆï¼Œå­˜å‚¨æ‰€æœ‰å•†å“çš„åŸºæœ¬ä¿¡æ¯
ä¸»é”®: ID
ä¸šåŠ¡é”®: NAME (å•†å“ç¼–ç /æ¬¾å·)
```

| å­—æ®µå | ä¸­æ–‡å | ç±»åž‹ | è¯´æ˜Ž |
|--------|--------|------|------|
| ID | ä¸»é”® | NUMBER | å•†å“å”¯ä¸€æ ‡è¯† |
| NAME | å•†å“ç¼–ç  | VARCHAR2(80) | æ¬¾å·ï¼Œå¦‚ HFM03705864-4 |
| VALUE | å•†å“åç§° | VARCHAR2(200) | å“åï¼Œå¦‚ æ°”æ³¡æ–¹ç³–é¡¹é“¾ |
| PRODUCTNO | è´§å· | VARCHAR2(80) | åŒNAME |
| M_DIM1_ID | å“ç‰ŒID | NUMBER | å…³è”M_DIMï¼Œå“ç‰Œç»´åº¦ |
| M_DIM2_ID | å¹´ä»½ID | NUMBER | å…³è”M_DIMï¼Œå¹´ä»½ç»´åº¦ |
| M_DIM3_ID | å­£èŠ‚ID | NUMBER | å…³è”M_DIMï¼Œå­£èŠ‚ç»´åº¦ |
| **M_DIM4_ID** | **ç±»åˆ«ID** | NUMBER | â­å…³è”M_DIMï¼Œç±»åˆ«(é¡¹é“¾/è€³çŽ¯ç­‰) |
| **M_DIM5_ID** | **æ€§è´¨ID** | NUMBER | â­å…³è”M_DIMï¼Œæ€§è´¨(åœ¨å”®/æ–°å“/ç»ç‰ˆ) |
| M_DIM6_ID | ç³»åˆ—ID | NUMBER | å…³è”M_DIMï¼Œç³»åˆ—ç»´åº¦ |
| PRICELIST | åŠç‰Œä»· | NUMBER | æ ‡å‡†é›¶å”®ä»· |
| PRICECOST | æˆæœ¬ä»· | NUMBER | é‡‡è´­æˆæœ¬ |
| IS_FIXEDASSETS | æ˜¯å¦ä¸»é”€å“ | CHAR(1) | Y/N |
| IS_PKGMATERIAL | æ˜¯å¦åŒ…æ | CHAR(1) | Y/N |
| ISACTIVE | æ˜¯å¦æœ‰æ•ˆ | CHAR(1) | Y=æœ‰æ•ˆ, N=æ— æ•ˆ |
| CREATED | åˆ›å»ºæ—¶é—´ | DATE | |
| UPDATED | æ›´æ–°æ—¶é—´ | DATE | |

---

### 1.3 C_STOREï¼ˆåº—ä»“æ¡£æ¡ˆï¼‰

```
è¡¨å: C_STORE
æè¿°: æ‰€æœ‰é—¨åº—å’Œä»“åº“çš„åŸºç¡€ä¿¡æ¯
ä¸»é”®: ID
ä¸šåŠ¡é”®: CODE (åº—ä»“ç¼–ç )
```

| å­—æ®µå | ä¸­æ–‡å | ç±»åž‹ | è¯´æ˜Ž |
|--------|--------|------|------|
| ID | ä¸»é”® | NUMBER | åº—ä»“å”¯ä¸€æ ‡è¯† |
| CODE | åº—ä»“ç¼–ç  | VARCHAR2(40) | å¦‚ 001, RT001, DS001 |
| NAME | åº—ä»“åç§° | VARCHAR2(255) | å¦‚ ä¸­å±±æ€»ä»“, å¹¿å·žK11ä¸“å–åº— |
| C_AREA_ID | åŒºåŸŸID | NUMBER | å…³è”C_AREA |
| DM_ISWAREHOUSE | æ˜¯å¦ä»“åº“ | NUMBER(1) | 1=ä»“åº“, 0=å¦ |
| DM_ISSTORE | æ˜¯å¦é—¨åº— | NUMBER(1) | 1=é—¨åº—, 0=å¦ |
| **IS_ALLO2OSTORAGE** | **å‚ä¸Žäº‘ä»“** | CHAR(1) | â­Y=å‚ä¸Žäº‘ä»“, N=ä¸å‚ä¸Ž |
| ISCENTER | æ˜¯å¦ç‰©æµä¸­å¿ƒ | CHAR(1) | Y/N |
| ISRETAIL | æ˜¯å¦å…è®¸é›¶å”® | CHAR(1) | Y/N |
| ISACTIVE | æ˜¯å¦æœ‰æ•ˆ | CHAR(1) | Y=æœ‰æ•ˆ, N=æ— æ•ˆ |

**åº—ä»“ç¼–ç è§„åˆ™ï¼š**
- `001` - ä¸­å±±æ€»ä»“ï¼ˆç”µå•†å‘è´§ä¸»ä»“ï¼‰
- `RT***` - çº¿ä¸‹é—¨åº—ï¼ˆå¦‚RT001=å¹¿å·žK11ï¼‰
- `DS***` - ç”µå•†è™šæ‹Ÿåº—ï¼ˆå¦‚DS001=å¤©çŒ«, DS009=æŠ–éŸ³ï¼‰

---

### 1.4 FA_STORAGEï¼ˆå®žæ—¶åº“å­˜ï¼‰

```
è¡¨å: FA_STORAGE
æè¿°: å®žæ—¶åº“å­˜è¡¨ï¼Œè®°å½•æ¯ä¸ªSKUåœ¨æ¯ä¸ªä»“åº“çš„åº“å­˜
ä¸»é”®: ID
```

| å­—æ®µå | ä¸­æ–‡å | ç±»åž‹ | è¯´æ˜Ž |
|--------|--------|------|------|
| ID | ä¸»é”® | NUMBER | |
| C_STORE_ID | åº—ä»“ID | NUMBER | å…³è”C_STORE.ID |
| M_PRODUCT_ID | å•†å“ID | NUMBER | å…³è”M_PRODUCT.ID |
| M_PRODUCTALIAS_ID | SKU ID | NUMBER | å…³è”M_PRODUCT_ALIAS.ID |
| **QTY** | **åº“å­˜æ•°é‡** | NUMBER | â­å½“å‰åº“å­˜ |
| QTYVALID | å¯ç”¨åº“å­˜ | NUMBER | æ‰£é™¤å ç”¨åŽçš„å¯ç”¨æ•° |
| QTYOCCUPY | å ç”¨æ•°é‡ | NUMBER | è¢«è®¢å•å ç”¨çš„æ•°é‡ |
| **QTYPURCHASEREM** | **é‡‡è´­æ¬ æ•°/åœ¨é€”** | NUMBER | â­å·²ä¸‹å•æœªåˆ°è´§çš„æ•°é‡ |
| PRICELIST | åŠç‰Œä»· | NUMBER | |
| ISACTIVE | æ˜¯å¦æœ‰æ•ˆ | CHAR(1) | Y=æœ‰æ•ˆ |

---

### 1.5 M_RETAILï¼ˆé›¶å”®å•ï¼‰

```
è¡¨å: M_RETAIL
æè¿°: é›¶å”®å•ä¸»è¡¨ï¼ŒåŒ…å«çº¿ä¸‹é—¨åº—é”€å”®å’Œçº¿ä¸Šå‘è´§
ä¸»é”®: ID
ä¸šåŠ¡é”®: BILLNO (å•æ®ç¼–å·)
```

| å­—æ®µå | ä¸­æ–‡å | ç±»åž‹ | è¯´æ˜Ž |
|--------|--------|------|------|
| ID | ä¸»é”® | NUMBER | |
| DOCNO | å•æ®ç¼–å· | VARCHAR2(40) | |
| **BILLDATE** | **å•æ®æ—¥æœŸ** | NUMBER(8) | â­æ ¼å¼YYYYMMDD |
| C_STORE_ID | åº—ä»“ID | NUMBER | å…³è”C_STORE.ID |
| **TOT_AMT_ACTUAL** | **å®žé™…é‡‘é¢** | NUMBER | â­æ­£æ•°=é”€å”®, è´Ÿæ•°=é€€è´§ |
| TOT_AMT_LIST | åŠç‰Œé‡‘é¢ | NUMBER | |
| TOT_QTY | æ€»æ•°é‡ | NUMBER | |
| **STATUS** | **çŠ¶æ€** | NUMBER | â­2=å·²å®¡æ ¸ |
| **ISACTIVE** | **æ˜¯å¦æœ‰æ•ˆ** | CHAR(1) | â­Y=æœ‰æ•ˆ |
| C_VIP_ID | ä¼šå‘˜ID | NUMBER | |
| CREATED | åˆ›å»ºæ—¶é—´ | DATE | |

**é‡è¦è¯´æ˜Žï¼š**
- çº¿ä¸‹é—¨åº—ï¼šæ”¶é“¶ä¹°å•æ—¶ç”Ÿæˆé”€å”®å•ï¼Œé€€è´§æ—¶ç”Ÿæˆè´Ÿæ•°å•
- çº¿ä¸Šç”µå•†ï¼šä»“åº“ç‚¹å‡»å‘è´§å‡ºåº“æ—¶ç”Ÿæˆé”€å”®å•ï¼Œé€€è´§å…¥åº“æ—¶ç”Ÿæˆè´Ÿæ•°å•
- TOT_AMT_ACTUAL > 0 è¡¨ç¤ºé”€å”®ï¼Œ< 0 è¡¨ç¤ºé€€è´§

---

### 1.6 M_RETAILITEMï¼ˆé›¶å”®æ˜Žç»†ï¼‰

```
è¡¨å: M_RETAILITEM
æè¿°: é›¶å”®å•å•†å“æ˜Žç»†
ä¸»é”®: ID
```

| å­—æ®µå | ä¸­æ–‡å | ç±»åž‹ | è¯´æ˜Ž |
|--------|--------|------|------|
| ID | ä¸»é”® | NUMBER | |
| M_RETAIL_ID | é›¶å”®å•ID | NUMBER | å…³è”M_RETAIL.ID |
| M_PRODUCT_ID | å•†å“ID | NUMBER | å…³è”M_PRODUCT.ID |
| M_PRODUCTALIAS_ID | SKU ID | NUMBER | |
| **QTY** | **æ•°é‡** | NUMBER | â­é”€å”®/é€€è´§æ•°é‡ |
| PRICELIST | åŠç‰Œä»· | NUMBER | |
| PRICEACTUAL | å®žé™…å•ä»· | NUMBER | |
| TOT_AMT_ACTUAL | å®žé™…é‡‘é¢ | NUMBER | |
| TOT_AMT_LIST | åŠç‰Œé‡‘é¢ | NUMBER | |

---

### 1.7 O2O_RETAIL_CHANNELï¼ˆç”µå•†æ¸ é“ï¼‰

| æ¸ é“ID | æ¸ é“åç§° | æ˜¯å¦ä¸»è¦ | åº—ä»“ç¼–ç  |
|--------|----------|----------|----------|
| 11 | å¤©çŒ« | â­ä¸»è¦ | DS001 |
| 28 | äº¬ä¸œ | â­ä¸»è¦ | DS002 |
| 57 | æŠ–éŸ³ | â­ä¸»è¦ | DS009 |
| 60 | å°çº¢ä¹¦ | â­ä¸»è¦ | DS006 |
| 300 | è§†é¢‘å· | â­ä¸»è¦ | DS024 |
| 19 | å”¯å“ä¼š | â­ä¸»è¦ | DS010 |
| 85 | å¾—ç‰© | â­ä¸»è¦ | DS015 |

---

### 1.8 è¡¨å…³è”å…³ç³»

```sql
-- æ ¸å¿ƒå…³è”SQL
FROM M_RETAILITEM ri
LEFT JOIN M_RETAIL r ON ri.M_RETAIL_ID = r.ID
LEFT JOIN M_PRODUCT p ON ri.M_PRODUCT_ID = p.ID
LEFT JOIN M_DIM d4 ON p.M_DIM4_ID = d4.ID        -- ç±»åˆ«
LEFT JOIN M_DIM d5 ON p.M_DIM5_ID = d5.ID        -- æ€§è´¨
LEFT JOIN M_DIM d6 ON p.M_DIM6_ID = d6.ID        -- ç³»åˆ—
LEFT JOIN C_STORE s ON r.C_STORE_ID = s.ID
WHERE r.ISACTIVE = 'Y' AND r.STATUS = 2
```

---

### 1.9 Oracleç‰¹æœ‰è¯­æ³•

```sql
-- ç©ºå€¼å¤„ç†ç”¨NVL
NVL(å­—æ®µ, é»˜è®¤å€¼)

-- æ—¥æœŸè½¬æ¢
TO_CHAR(SYSDATE, 'YYYYMMDD')
TO_NUMBER(TO_CHAR(SYSDATE-30, 'YYYYMMDD'))

-- å­—ç¬¦ä¸²æ‹¼æŽ¥ç”¨ ||
å­—æ®µ1 || '-' || å­—æ®µ2

-- é¿å…é™¤é›¶
NULLIF(åˆ†æ¯, 0)

-- çª—å£å‡½æ•°
ROW_NUMBER() OVER (ORDER BY å­—æ®µ DESC)
```

---

## äºŒã€ç»´åº¦ç¼–ç ä¸ŽIDæ˜ å°„

### 2.1 M_DIMç»´åº¦è¡¨è¯´æ˜Ž

M_DIMæ˜¯ä¼¯ä¿ŠERPçš„**é€šç”¨ç»´åº¦è¡¨**ï¼Œå­˜å‚¨å„ç§å±žæ€§å€¼ã€‚

| å­—æ®µ | ç±»åž‹ | è¯´æ˜Ž |
|------|------|------|
| ID | NUMBER | ä¸»é”®ï¼Œç»´åº¦å€¼ID |
| ATTRIBNAME | VARCHAR2 | å±žæ€§å€¼åç§°ï¼ˆå¦‚ï¼šé¡¹é“¾ã€è€³çŽ¯ï¼‰ |
| ISACTIVE | CHAR(1) | æ˜¯å¦æœ‰æ•ˆ Y/N |

**M_PRODUCTä¸ŽM_DIMçš„å…³è”ï¼š**

| M_PRODUCTå­—æ®µ | ç»´åº¦å«ä¹‰ | ä¸šåŠ¡é‡è¦æ€§ |
|---------------|----------|------------|
| M_DIM1_ID | å“ç‰Œ | ä¸€èˆ¬ |
| M_DIM2_ID | å¹´ä»½ | ä¸€èˆ¬ |
| M_DIM3_ID | å­£èŠ‚ | ä¸€èˆ¬ |
| **M_DIM4_ID** | **ç±»åˆ«** | â­â­â­è¶…é‡è¦ |
| **M_DIM5_ID** | **æ€§è´¨** | â­â­â­è¶…é‡è¦ |
| **M_DIM6_ID** | **ç³»åˆ—** | â­â­é‡è¦ |

---

### 2.2 ç±»åˆ«ç»´åº¦ï¼ˆM_DIM4_IDï¼‰â­æ ¸å¿ƒ

**ä¸»é”€å“ç±»åˆ«ï¼ˆç»Ÿè®¡æ—¶ä¿ç•™ï¼‰ï¼š**

| ID | ç±»åˆ«åç§° | è¯´æ˜Ž |
|----|----------|------|
| 134 | è€³çŽ¯ | ä¸»åŠ›å“ç±» |
| 142 | é¡¹é“¾ | ä¸»åŠ›å“ç±» |
| 139 | æ‰‹é“¾ | |
| 138 | æˆ’æŒ‡ | |
| 141 | å¤´é¥° | |
| 143 | èƒ¸é’ˆ | |
| 133 | åŠå  | |
| 136 | å† å†• | |
| 140 | æ‰‹é•¯ | |
| 137 | è„šé“¾ | |
| 144 | è¢–æ‰£ | |
| 145 | ç¤¼ç›’ | âš ï¸å«ç›²ç›’ï¼Œéœ€ä¿ç•™ |

**è¾…é”€å“ç±»åˆ«ï¼ˆç»Ÿè®¡æ—¶æŽ’é™¤ï¼‰ï¼š**

| ID | ç±»åˆ«åç§° | è¯´æ˜Ž |
|----|----------|------|
| 146 | é…ä»¶ | âŒæŽ’é™¤ |
| 147 | è¾…æ–™ | âŒæŽ’é™¤ |
| 148 | è¾…é”€å“ | âŒæŽ’é™¤ |
| 149 | åŠžå…¬ç”¨å“ | âŒæŽ’é™¤ |
| 150 | é“å…· | âŒæŽ’é™¤ |

**ç­›é€‰SQLï¼š**
```sql
-- ä¸»é”€å“IDåˆ—è¡¨ï¼ˆå¿…é¡»è®°ä½ï¼‰
WHERE p.M_DIM4_ID IN (134,142,139,138,141,143,133,136,140,137,144,145)
```

---

### 2.3 æ€§è´¨ç»´åº¦ï¼ˆM_DIM5_IDï¼‰

| æ€§è´¨åˆ†ç»„ | IDåˆ—è¡¨ | è¯´æ˜Ž |
|----------|--------|------|
| åœ¨å”®æ¬¾ | 224, 296, 297 | åœ¨å”®æ¬¾-åŒæ­¥/çº¿ä¸Š/çº¿ä¸‹ |
| æ–°å“ | 225, 298, 299 | æ–°å“-åŒæ­¥/çº¿ä¸Š/çº¿ä¸‹ |
| ç»ç‰ˆæ¬¾ | 127, 126, 152 | ç»ç‰ˆæ¬¾-åŒæ­¥/çº¿ä¸Š/çº¿ä¸‹ |
| ç»å…¸æ¬¾ | 329 | ç»å…¸æ¬¾ |

**ç­›é€‰SQLï¼š**
```sql
-- åœ¨å”®æ¬¾
WHERE p.M_DIM5_ID IN (224, 296, 297)

-- æ–°å“
WHERE p.M_DIM5_ID IN (225, 298, 299)

-- ç»ç‰ˆæ¬¾
WHERE p.M_DIM5_ID IN (127, 126, 152)
```

---

### 2.4 ä»“åº“ç¼–ç è§„åˆ™

| ç¼–ç å‰ç¼€ | ç±»åž‹ | ç¤ºä¾‹ |
|----------|------|------|
| 001 | ä¸­å±±æ€»ä»“ | 001=ä¸­å±±æ€»ä»“ï¼ˆç”µå•†ä¸»ä»“ï¼‰ |
| 00X | åŠŸèƒ½ä»“ | 002=æ—§æ¬¾ä»“, 003=è¿”ä¿®ä»“, 004=ä¸­è½¬ä»“ |
| RT*** | çº¿ä¸‹é—¨åº— | RT001=å¹¿å·žK11, RT002=åŒ—äº¬ä¸‰é‡Œå±¯ |
| DS*** | ç”µå•†è™šæ‹Ÿåº— | DS001=å¤©çŒ«, DS009=æŠ–éŸ³ |

**ä»“åº“ç­›é€‰SQLï¼š**
```sql
-- ä¸­å±±æ€»ä»“
WHERE s.CODE = '001'

-- äº‘ä»“ï¼ˆ48å®¶å‚ä¸Žäº‘ä»“çš„é—¨åº—ï¼‰
WHERE s.IS_ALLO2OSTORAGE = 'Y'

-- æ€»ä»“+äº‘ä»“ï¼ˆç”µå•†å¯å”®åº“å­˜ï¼‰
WHERE (s.CODE = '001' OR s.IS_ALLO2OSTORAGE = 'Y')

-- çº¿ä¸‹é—¨åº—
WHERE s.CODE LIKE 'RT%'

-- ç”µå•†è™šæ‹Ÿåº—
WHERE s.CODE LIKE 'DS%'
```

---

### 2.5 æ—¥æœŸæ ¼å¼

ä¼¯ä¿ŠERPæ—¥æœŸå­—æ®µä½¿ç”¨ **NUMBER(8)** ç±»åž‹ï¼Œæ ¼å¼ä¸º **YYYYMMDD**ï¼š

```sql
-- ç¤ºä¾‹å€¼
BILLDATE = 20260113  -- 2026å¹´1æœˆ13æ—¥

-- æ—¥æœŸè½¬æ¢
TO_NUMBER(TO_CHAR(SYSDATE, 'YYYYMMDD'))  -- å½“å¤©
TO_NUMBER(TO_CHAR(SYSDATE-30, 'YYYYMMDD'))  -- 30å¤©å‰

-- æœˆä»½ç­›é€‰
WHERE BILLDATE >= 20260101 AND BILLDATE <= 20260131
```

---

### 2.6 å¿«é€Ÿå‚è€ƒå¡ç‰‡

**ä¸»é”€å“ç±»åˆ«IDï¼š**
```
134,142,139,138,141,143,133,136,140,137,144,145
```

**åœ¨å”®æ¬¾æ€§è´¨IDï¼š**
```
224,296,297
```

**ç»ç‰ˆæ¬¾æ€§è´¨IDï¼š**
```
127,126,152
```

**æœ‰æ•ˆå·²å®¡æ ¸ï¼š**
```sql
ISACTIVE = 'Y' AND STATUS = 2
```

---

## ä¸‰ã€MySQLæ•°ä»“å­—æ®µæ˜ å°„

### 3.1 æ•°ä»“æž¶æž„

```
Oracleï¼ˆä¼¯ä¿ŠERPç”Ÿäº§åº“ï¼‰
         â”‚
         â–¼ ETLæ¯æ—¥åŒæ­¥
MySQLï¼ˆæœ¬åœ°æ•°ä»“ hefang_dwï¼‰
         â”‚
         â–¼
Tableau/FineBIï¼ˆå¯è§†åŒ–ï¼‰
```

---

### 3.2 dim_productï¼ˆå•†å“ç»´åº¦ï¼‰

| MySQLå­—æ®µ | Oracleæ¥æº | è¯´æ˜Ž |
|-----------|------------|------|
| product_id | M_PRODUCT.ID | ä¸»é”® |
| product_code | M_PRODUCT.NAME | æ¬¾å· |
| product_name | M_PRODUCT.VALUE | å“å |
| category_id | M_PRODUCT.M_DIM4_ID | ç±»åˆ«ID |
| category_name | M_DIM.ATTRIBNAME | ç±»åˆ«åï¼ˆJOIN M_DIMï¼‰ |
| property_id | M_PRODUCT.M_DIM5_ID | æ€§è´¨ID |
| property_name | M_DIM.ATTRIBNAME | æ€§è´¨å |
| series_id | M_PRODUCT.M_DIM6_ID | ç³»åˆ—ID |
| series_name | M_DIM.ATTRIBNAME | ç³»åˆ—å |
| price_list | M_PRODUCT.PRICELIST | åŠç‰Œä»· |
| price_cost | M_PRODUCT.PRICECOST | æˆæœ¬ä»· |
| is_main_product | è®¡ç®—å­—æ®µ | M_DIM4_IDåœ¨ä¸»é”€å“åˆ—è¡¨å†…åˆ™ä¸ºY |

---

### 3.3 dim_storeï¼ˆåº—ä»“ç»´åº¦ï¼‰

| MySQLå­—æ®µ | Oracleæ¥æº | è¯´æ˜Ž |
|-----------|------------|------|
| store_id | C_STORE.ID | ä¸»é”® |
| store_code | C_STORE.CODE | ç¼–ç  |
| store_name | C_STORE.NAME | åç§° |
| area_id | C_STORE.C_AREA_ID | åŒºåŸŸID |
| area_name | C_AREA.NAME | åŒºåŸŸåï¼ˆJOIN C_AREAï¼‰ |
| is_warehouse | C_STORE.DM_ISWAREHOUSE | æ˜¯å¦ä»“åº“ |
| is_store | C_STORE.DM_ISSTORE | æ˜¯å¦é—¨åº— |
| is_cloud_store | C_STORE.IS_ALLO2OSTORAGE | æ˜¯å¦äº‘ä»“ |
| store_type | è®¡ç®—å­—æ®µ | æ ¹æ®CODEå‰ç¼€åˆ¤æ–­ |

---

### 3.4 dim_skuï¼ˆSKUç»´åº¦ï¼‰

| MySQLå­—æ®µ | Oracleæ¥æº | è¯´æ˜Ž |
|-----------|------------|------|
| sku_id | M_PRODUCT_ALIAS.ID | SKUä¸»é”® |
| sku_barcode | M_PRODUCT_ALIAS.NO | æ¡ç  |
| product_id | M_PRODUCT_ALIAS.M_PRODUCT_ID | å•†å“ID |
| sku_color | M_ATTRIBUTESETINSTANCE.VALUE1 | é¢œè‰² |
| sku_size | M_ATTRIBUTESETINSTANCE.VALUE2 | å°ºå¯¸ |
| is_active | M_PRODUCT_ALIAS.ISACTIVE | æ˜¯å¦æœ‰æ•ˆ |

---

### 3.5 dws_sales_dailyï¼ˆæ—¥é”€å”®æ±‡æ€»ï¼‰

| MySQLå­—æ®µ | Oracleè®¡ç®—é€»è¾‘ |
|-----------|----------------|
| date_id | M_RETAIL.BILLDATE |
| store_id | M_RETAIL.C_STORE_ID |
| store_code | C_STORE.CODE |
| is_cloud_store | C_STORE.IS_ALLO2OSTORAGE |
| product_id | M_RETAILITEM.M_PRODUCT_ID |
| m_productalias_id | M_RETAILITEM.M_PRODUCTALIAS_ID |
| sales_qty | SUM(QTY) WHERE TOT_AMT_ACTUAL > 0 |
| sales_amount | SUM(TOT_AMT_ACTUAL) WHERE > 0 |
| return_qty | SUM(ABS(QTY)) WHERE TOT_AMT_ACTUAL < 0 |
| return_amount | SUM(ABS(TOT_AMT_ACTUAL)) WHERE < 0 |
| net_qty | sales_qty - return_qty |
| net_amount | sales_amount - return_amount |
| order_count | COUNT(DISTINCT M_RETAIL.ID) |

---

### 3.6 dws_inventory_dailyï¼ˆæ—¥åº“å­˜å¿«ç…§ï¼‰

| MySQLå­—æ®µ | Oracleæ¥æº |
|-----------|------------|
| date_id | å¿«ç…§å½“å¤©æ—¥æœŸ |
| store_id | FA_STORAGE.C_STORE_ID |
| store_code | C_STORE.CODE |
| is_cloud_store | C_STORE.IS_ALLO2OSTORAGE |
| product_id | FA_STORAGE.M_PRODUCT_ID |
| m_productalias_id | FA_STORAGE.M_PRODUCTALIAS_ID |
| qty | FA_STORAGE.QTY |
| qty_valid | FA_STORAGE.QTYVALID |
| qty_occupy | å›ºå®šå¡«å……0ï¼ˆæºè¡¨å­—æ®µæœªä½¿ç”¨ï¼‰ |
| qtypurchaserem | FA_STORAGE.QTYPURCHASEREM |

---

### 3.7 ads_inventory_healthï¼ˆåº“å­˜å¥åº·åº¦ï¼‰

è¿™å¼ è¡¨ä¸ä»ŽOracleç›´æŽ¥æŠ½ï¼Œè€Œæ˜¯åœ¨MySQLå†…åŸºäºŽdwså±‚è®¡ç®—ï¼š

```
æ•°æ®æ¥æºï¼š
- åº“å­˜æ•°æ® â† dws_inventory_daily
- é”€å”®æ•°æ® â† dws_sales_daily
- å•†å“ä¿¡æ¯ â† dim_product
- SKUä¿¡æ¯ â† dim_sku
- ä»“åº“ä¿¡æ¯ â† dim_store

è®¡ç®—å†…å®¹ï¼š
- å‘¨è½¬å¤©æ•° = åº“å­˜ / (30å¤©é”€é‡ / 30)
- åº“å­˜çŠ¶æ€ï¼ˆæ»žé”€/ç¼ºè´§/æ­£å¸¸/è¿‡é«˜ï¼‰
- ABCåˆ†çº§ï¼ˆæŒ‰é”€å”®é¢ç´¯è®¡å æ¯”ï¼‰
- å»ºè®®è¡¥è´§ = (90-å‘¨è½¬å¤©æ•°)*æ—¥å‡é”€é‡ - é€€è´§ - é‡‡è´­æ¬ æ•°
```

---

### 3.8 æ•°æ®ç±»åž‹å¯¹ç…§

| æ•°æ®ç±»åž‹ | Oracle | MySQL |
|----------|--------|-------|
| æ•´æ•° | NUMBER | INT/BIGINT |
| å°æ•° | NUMBER | DECIMAL |
| å­—ç¬¦ä¸² | VARCHAR2 | VARCHAR |
| æ—¥æœŸ | DATE | DATE/DATETIME |
| å¸ƒå°” | CHAR(1) Y/N | CHAR(1) Y/N |

---

## å››ã€MySQLæ•°æ®å­—å…¸

**å®Œæ•´MySQLè¡¨ç»“æž„è¯·å‚è€ƒï¼š** [mysql_data_dictionary.md](mysql_data_dictionary.md)

åŒ…å«ä»¥ä¸‹è¡¨çš„å®Œæ•´å­—æ®µè¯´æ˜Žï¼š
- ads_inventory_healthï¼ˆåº“å­˜å¥åº·åº¦åº”ç”¨è¡¨ï¼‰
- dim_categoryï¼ˆç±»åˆ«ç»´åº¦è¡¨ï¼‰
- dim_channelï¼ˆç”µå•†æ¸ é“ç»´åº¦è¡¨ï¼‰
- dim_dateï¼ˆæ—¥æœŸç»´åº¦è¡¨ï¼‰
- dim_productï¼ˆå•†å“ç»´åº¦è¡¨ï¼‰
- dim_product_attrï¼ˆå•†å“å±žæ€§è¡¨ï¼‰
- dim_skuï¼ˆSKUç»´åº¦è¡¨ï¼‰
- dim_storeï¼ˆåº—ä»“ç»´åº¦è¡¨ï¼‰
- dws_inventory_dailyï¼ˆæ—¥åº“å­˜å¿«ç…§è¡¨ï¼‰
- dws_sales_dailyï¼ˆæ—¥é”€å”®æ±‡æ€»è¡¨ï¼‰

---

*æ–‡æ¡£ç‰ˆæœ¬: 2.1 | æ›´æ–°æ—¥æœŸ: 2026-01-30 | åˆå¹¶æ–‡æ¡£1ã€2ã€9ã€12*
